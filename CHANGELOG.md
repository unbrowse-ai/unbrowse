# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added
- Browser header profiler for capturing and replaying site-specific headers from Node.js (`header-profiler.ts`)
- Frequency-based header template system — captures headers appearing on >= 80% of requests to a domain
- Header classification engine: `protocol`, `browser`, `cookie`, `auth`, `context`, `app` categories
- `resolveHeaders()` merges template + endpoint overrides + auth + cookies into a full header set
- `primeHeaders()` connects to Chrome via Playwright CDP to capture fresh cookies and header values
- Cookie priming from browser sessions — `primeHeaders()` returns `PrimeResult { headers, cookies }`
- `headers.json` written to skill directory during skill generation
- Generated `api.ts` client automatically loads and uses `headers.json` for replay
- Sanitized header profiles included in marketplace skill publish payload (auth values stripped)
- `sanitizeHeaderProfile()` function to strip auth header values before publishing
- Per-endpoint header overrides for headers that differ from domain-wide common set
- Node mode as default for `resolveHeaders()` — skips context headers to avoid TLS fingerprint mismatch
- Production benchmark eval against 1,555 marketplace skills (`production-benchmark.ts`)
- Capture-replay eval across 10 real websites with 6 header strategies (`capture-replay-eval.ts`)
- Comprehensive benchmark report with before/after comparison (`docs/benchmark-report.md`)
- 110+ unit and integration tests for header profiler pipeline
- Server proxy integration contract documentation for header profile usage
- Auto-routing skill for OpenClaw — agent automatically uses unbrowse when user asks to interact with any website's API
- Plugin skill registration via `openclaw.plugin.json` `skills` field — unbrowse instructions injected into agent prompt
- Auto-launch headless Chromium for replay when no browser is running — `execInChrome` is now the default path everywhere
- Plugin telemetry opt-out support
- Plugin account wallet-link request support
- Marketplace frontend endpoint explorer in skill detail (`/skill/:id`) using `/marketplace/skills/:id/endpoints`

### Changed
- `parseHar()` now always generates `headerProfile` on the returned `ApiData` object
- `execViaFetch` in `unbrowse_replay.ts` now uses `resolveHeaders()` + primed cookies by default
- Skill publish payload (`PublishPayload`) includes optional `headerProfile` field
- Skill install writes `headers.json` alongside `SKILL.md` and `auth.json`
- Plugin runtime switched to native CDP + `playwright-core`
- Plugin marketplace metadata refreshed
- Default `autoContribute` enabled in plugin manifest
- Marketplace frontend cards now show endpoint counts in browse and search views
- Frontend now routes API calls through `VITE_API_BASE` via shared `api-base` helper (marketplace + app flows)
- Removed frontend email/google login flows and legacy auth-context pages; web app now runs without frontend login/auth routes
- Backend auth flow is now wallet-only on runtime routes; BetterAuth session middleware/routes are no longer used
- CI: web app deployment Dockerized for staging/prod SSH workflows
- Documentation refresh for plugin auth/login behavior and agent notes

### Fixed
- Endpoint override domain resolution — keys now include domain to prevent cross-domain confusion
- TLS fingerprint mismatch detection — sending Chrome User-Agent from Node.js no longer triggers anti-bot (context headers excluded in node mode)
- Plugin auto-discovery and auth flows now fallback cleanly when browser tooling/CDP is unavailable
- Plugin auto-publish now verifies/prunes invalid GET endpoints before publish
- Stabilized OpenClaw CDP + backend tracing interactions
- Reduced brittle legacy browser API usage and added auto-publish backoff
- CI: web Docker build now works when lockfile is absent
- Added `127.0.0.1` local origins to backend CORS/trusted-origins allowlists (3000/3001/5173/4111)
- Fixed staging backend request timeouts caused by session auth lookups during request middleware/ingestion paths

## [0.5.4] - 2026-02-07

### Fixed
- Wrap Solana native imports in try/catch for Node v24/v25 compatibility
- Check process.title in isDiagnosticMode() for openclaw-doctor
- Deadlock with doctor/security audit commands
- Reduce agent context injection noise

## [0.5.3] - 2026-02-05

### Added
- FDRY token economy — rewards, execution, API routes (feature-flagged)
- Telemetry events endpoint (`POST /telemetry/events`)
- E2E tests for collaborative skill system
- Wallet integration for skill publishing and staking
- Frontend FDRY token economy UI

### Fixed
- CORS: allow localhost:3001 and staging-index.unbrowse.ai origins

### Changed
- OOP refactor of HAR parser with route generalization and schema capture
- Integrated LLM describer for rich endpoint documentation in skill generation

[Unreleased]: https://github.com/lekt9/unbrowse-openclaw/compare/v0.5.4...HEAD
[0.5.4]: https://github.com/lekt9/unbrowse-openclaw/compare/v0.5.3...v0.5.4
[0.5.3]: https://github.com/lekt9/unbrowse-openclaw/compare/v0.5.2...v0.5.3
